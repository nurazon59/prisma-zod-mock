# よくある質問

## 一般的な質問

### Q: prisma-zod-mockとは何ですか？

A: prisma-zod-mockは、PrismaスキーマからZodバリデーションスキーマとモックデータファクトリーを自動生成するジェネレーターです。テスト用の型安全なモックデータを簡単に作成できます。

### Q: どのバージョンのPrismaに対応していますか？

A: Prisma 4.0以上に対応しています。最新バージョンのPrismaでの動作を推奨します。

### Q: TypeScriptは必須ですか？

A: いいえ、JavaScriptプロジェクトでも使用できます。ただし、TypeScriptを使用することで、より強力な型安全性の恩恵を受けられます。

## 設定に関する質問

### Q: 生成されたファイルの場所を変更するには？

A: `output`オプションで出力先を指定できます：

```prisma
generator zodMock {
  provider = "prisma-zod-mock"
  output   = "./src/generated/mocks"
}
```

### Q: 日本語のモックデータを生成するには？

A: `mockDataLocale`オプションを設定します：

```prisma
generator zodMock {
  provider       = "prisma-zod-mock"
  mockDataLocale = "ja"
}
```

### Q: Zodスキーマだけを生成したい場合は？

A: `createMockFactories`を`false`に設定します：

```prisma
generator zodMock {
  provider            = "prisma-zod-mock"
  createZodSchemas    = true
  createMockFactories = false
}
```

## 使用方法に関する質問

### Q: 特定のフィールドに固定値を設定するには？

A: `@mock`アノテーションを使用します：

```prisma
model User {
  role String /// @mock "ADMIN"
}
```

### Q: リレーションを含むモックデータを生成するには？

A: `createRelationMocks`オプションを有効にして、`WithRelations`ファクトリーを使用します：

```typescript
const userWithPosts = createUserWithRelationsMock();
```

### Q: 大量のテストデータを生成するには？

A: バッチファクトリーを使用します：

```typescript
const users = createUserMockBatch(100);
```

## トラブルシューティング

### Q: 生成されたファイルが見つからない

A: 以下を確認してください：
1. `npx prisma generate`を実行したか
2. `output`パスが正しいか
3. `.gitignore`でファイルが除外されていないか

### Q: モックデータが期待と異なる

A: 値生成の優先順位を確認してください：
1. `@mock`アノテーション（最優先）
2. `@default`値
3. セマンティック推論

### Q: エラー「Cannot find module」が発生する

A: 以下を試してください：
```bash
# node_modulesを削除して再インストール
rm -rf node_modules
npm install

# Prismaクライアントを再生成
npx prisma generate
```

## パフォーマンスに関する質問

### Q: 生成が遅い場合は？

A: 大規模なスキーマの場合、以下を検討してください：
- `useMultipleFiles`を`true`にして並列処理を活用
- 不要なモデルは`@@ignore`で除外
- 必要最小限のリレーションのみ定義

### Q: メモリ使用量を削減するには？

A: バッチ生成時は小さなチャンクに分割：

```typescript
// 悪い例：一度に10000件
const allUsers = createUserMockBatch(10000);

// 良い例：1000件ずつ処理
for (let i = 0; i < 10; i++) {
  const users = createUserMockBatch(1000);
  // 処理...
}
```

## 高度な使用方法

### Q: カスタムジェネレーターを作成できますか？

A: 生成されたファクトリーをラップして拡張できます：

```typescript
import { createUserMock as baseMock } from './generated';

export function createUserMock(overrides = {}) {
  const user = baseMock(overrides);
  // カスタムロジック
  return user;
}
```

### Q: 他のライブラリと統合するには？

A: 生成されたスキーマやファクトリーは標準的なTypeScript/JavaScriptコードなので、任意のライブラリと組み合わせられます：

```typescript
// Faker.jsとの組み合わせ
import { faker } from '@faker-js/faker';
import { createUserMock } from './generated';

const user = createUserMock({
  bio: faker.lorem.paragraphs(5)
});
```

## コントリビューション

### Q: バグを見つけた場合は？

A: GitHubでIssueを作成してください。再現可能な最小限のコード例を含めていただけると助かります。

### Q: 機能リクエストがある場合は？

A: GitHubでDiscussionを開始するか、Pull Requestを送ってください。新機能の提案は大歓迎です！