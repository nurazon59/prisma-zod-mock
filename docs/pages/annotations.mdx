# アノテーション

`@mock`アノテーションを使用して、各フィールドのモック生成ロジックを細かくカスタマイズできます。

## 基本的な構文

アノテーションは`///`コメントとして、フィールド定義の後に記述します：

```prisma
model User {
  email String /// @mock faker.internet.email()
}
```

## 値生成の優先順位

prisma-zod-mockは以下の優先順位で値を生成します：

1. **@mockアノテーション** - 最優先
2. **Prismaデフォルト値** - `@default()`属性
3. **セマンティック推論** - フィールド名から自動判定

## アノテーションタイプ

### Faker.js メソッド

Faker.jsの任意のメソッドを直接指定できます：

```prisma
model User {
  id          String   @id /// @mock faker.string.uuid()
  email       String   /// @mock faker.internet.email()
  name        String   /// @mock faker.person.fullName()
  avatar      String?  /// @mock faker.image.avatar()
  bio         String?  /// @mock faker.lorem.paragraph()
  company     String   /// @mock faker.company.name()
  jobTitle    String   /// @mock faker.person.jobTitle()
  phone       String   /// @mock faker.phone.number()
  website     String?  /// @mock faker.internet.url()
  birthday    DateTime /// @mock faker.date.birthdate()
}
```

### 固定値

特定の値を常に使用したい場合：

```prisma
model Settings {
  id              String   @id
  theme           String   /// @mock "dark"
  language        String   /// @mock "ja"
  emailNotifications Boolean /// @mock true
  maxRetries      Int      /// @mock 3
  timeout         Float    /// @mock 30.5
}
```

### 範囲指定 (@mock.range)

数値型フィールドで使用可能：

```prisma
model Product {
  id          String  @id
  price       Float   /// @mock.range(100.0, 10000.0)
  stock       Int     /// @mock.range(0, 1000)
  discount    Float   /// @mock.range(0.0, 0.5)
  rating      Float   /// @mock.range(1.0, 5.0)
  views       Int     /// @mock.range(0, 1000000)
}
```

### パターン指定 (@mock.pattern)

正規表現パターンに基づいた文字列生成：

```prisma
model Account {
  id              String  @id
  accountNumber   String  /// @mock.pattern("[0-9]{4}-[0-9]{4}-[0-9]{4}")
  postalCode      String  /// @mock.pattern("[0-9]{3}-[0-9]{4}")
  productCode     String  /// @mock.pattern("[A-Z]{3}-[0-9]{6}")
  licenseKey      String  /// @mock.pattern("[A-Z0-9]{5}-[A-Z0-9]{5}-[A-Z0-9]{5}")
}
```

### 列挙値 (@mock.enum)

指定した値からランダムに選択：

```prisma
model Task {
  id          String   @id
  status      String   /// @mock.enum("pending", "in_progress", "completed", "cancelled")
  priority    String   /// @mock.enum("low", "medium", "high", "urgent")
  category    String   /// @mock.enum("bug", "feature", "improvement", "documentation")
  size        String   /// @mock.enum("XS", "S", "M", "L", "XL")
}
```

## 実践的な例

### ユーザープロファイル

```prisma
model UserProfile {
  id              String   @id @default(cuid())
  // 日本語の名前を生成
  firstName       String   /// @mock faker.person.firstName()
  lastName        String   /// @mock faker.person.lastName()

  // メールアドレスは会社ドメインで統一
  email           String   @unique /// @mock.pattern("[a-z]+.[a-z]+@company.com")

  // 年齢は18-65歳の範囲
  age             Int      /// @mock.range(18, 65)

  // 部署は固定の選択肢から
  department      String   /// @mock.enum("営業部", "開発部", "人事部", "経理部", "マーケティング部")

  // 役職レベル
  level           Int      /// @mock.enum(1, 2, 3, 4, 5)

  // プロフィール画像
  avatar          String?  /// @mock faker.image.avatarGitHub()

  // 自己紹介（日本語）
  bio             String?  /// @mock faker.lorem.paragraph()

  // 入社日（過去5年以内）
  joinedAt        DateTime /// @mock faker.date.recent({ days: 1825 })
}
```

### 商品情報

```prisma
model Product {
  id              String   @id @default(cuid())

  // 商品コード
  sku             String   @unique /// @mock.pattern("PRD-[0-9]{6}")

  // 商品名
  name            String   /// @mock faker.commerce.productName()

  // 商品説明
  description     String   /// @mock faker.commerce.productDescription()

  // 価格（1,000円〜100,000円）
  price           Float    /// @mock.range(1000.0, 100000.0)

  // セール価格（価格の70-90%）
  salePrice       Float?   /// @mock.range(700.0, 90000.0)

  // 在庫数
  stock           Int      /// @mock.range(0, 500)

  // カテゴリ
  category        String   /// @mock.enum("electronics", "clothing", "food", "books", "toys")

  // 商品の状態
  condition       String   /// @mock.enum("new", "used", "refurbished")

  // 評価（1-5）
  rating          Float    /// @mock.range(1.0, 5.0)

  // レビュー数
  reviewCount     Int      /// @mock.range(0, 1000)
}
```

## デフォルト値との組み合わせ

Prismaの`@default`とアノテーションを組み合わせる例：

```prisma
model Configuration {
  id              String   @id @default(cuid())

  // デフォルト値が優先される（アノテーションなし）
  isActive        Boolean  @default(true)

  // アノテーションが優先される
  theme           String   @default("light") /// @mock "dark"

  // enumのデフォルト値
  role            String   @default("USER") /// @mock.enum("USER", "ADMIN", "GUEST")

  // 計算されたデフォルト値
  createdAt       DateTime @default(now())

  // カスタムデフォルト値をアノテーションで上書き
  maxAttempts     Int      @default(3) /// @mock.range(5, 10)
}
```

## ベストプラクティス

1. **一貫性を保つ**: 同じ種類のフィールドには同じパターンのアノテーションを使用
2. **現実的なデータ**: テストで意味のあるデータを生成するようアノテーションを設定
3. **ローカライズ**: `mockDataLocale`設定と組み合わせて適切な言語のデータを生成
4. **バリデーション**: パターンや範囲は実際のビジネスルールに合わせて設定
